<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backgammon Dice Probability Visualizer</title>
    <link rel="stylesheet" href="style.css?v=2">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1>Backgammon Dice Probability</h1>
        </header>

        <div class="tabs">
            <button class="tab-button active" data-tab="sums">Sums</button>
            <button class="tab-button" data-tab="bar">Bar Entry</button>
            <button class="tab-button" data-tab="hit">Hit Probability</button>
            <button class="tab-button" data-tab="bearoff">Bear-off</button>
        </div>

        <main>
            <!-- Sums Tab -->
            <div class="tab-content active" id="sums-tab">
                <div class="calculator-section">
                    <h2>Select a Sum</h2>
                    <div class="sum-buttons" id="sumButtons"></div>
                    <div class="probability-info" id="probabilityInfo"></div>
                </div>
                <div class="grid-section">
                    <h2>The 36 Combinations</h2>
                    <div class="dice-grid" id="diceGrid"></div>
                </div>
                <div class="combinations-table-section">
                    <h2>All Combinations</h2>
                    <table class="combinations-table" id="sumsTable">
                        <thead>
                            <tr>
                                <th>Sum</th>
                                <th>Ways</th>
                                <th>Probability</th>
                            </tr>
                        </thead>
                        <tbody id="sumsTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Bar Entry Tab -->
            <div class="tab-content" id="bar-tab">
                <div class="calculator-section">
                    <h2>Probability of Entering from the Bar</h2>
                    <p class="section-description">Select which points are blocked by your opponent</p>
                    <div class="bar-entry-controls">
                        <div class="button-group point-toggles" id="blockedPointsGroup">
                            <button class="point-toggle" data-point="1">1</button>
                            <button class="point-toggle" data-point="2">2</button>
                            <button class="point-toggle" data-point="3">3</button>
                            <button class="point-toggle" data-point="4">4</button>
                            <button class="point-toggle" data-point="5">5</button>
                            <button class="point-toggle" data-point="6">6</button>
                        </div>
                    </div>
                    <div class="bar-entry-result" id="barEntryResult"></div>
                </div>
                <div class="grid-section">
                    <h2>The 36 Combinations</h2>
                    <div class="dice-grid" id="barGrid"></div>
                </div>
                <div class="combinations-table-section">
                    <h2>All Combinations</h2>
                    <table class="combinations-table" id="barTable">
                        <thead>
                            <tr>
                                <th>Blocked</th>
                                <th>Open</th>
                                <th>Ways In</th>
                                <th>Probability</th>
                                <th>Odds</th>
                            </tr>
                        </thead>
                        <tbody id="barTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Hit Probability Tab -->
            <div class="tab-content" id="hit-tab">
                <div class="calculator-section">
                    <h2>Probability of Hitting a Blot</h2>
                    <div class="hit-controls">
                        <div class="button-group">
                            <button class="option-button" data-value="1">1</button>
                            <button class="option-button" data-value="2">2</button>
                            <button class="option-button" data-value="3">3</button>
                            <button class="option-button" data-value="4">4</button>
                            <button class="option-button" data-value="5">5</button>
                            <button class="option-button" data-value="6">6</button>
                            <button class="option-button" data-value="7">7</button>
                            <button class="option-button" data-value="8">8</button>
                            <button class="option-button" data-value="9">9</button>
                            <button class="option-button" data-value="10">10</button>
                            <button class="option-button" data-value="11">11</button>
                            <button class="option-button" data-value="12">12</button>
                        </div>
                    </div>
                    <div class="hit-result" id="hitResult"></div>
                </div>
                <div class="grid-section">
                    <h2>The 36 Combinations</h2>
                    <div class="dice-grid" id="hitGrid"></div>
                </div>
                <div class="combinations-table-section">
                    <h2>All Combinations</h2>
                    <table class="combinations-table" id="hitTable">
                        <thead>
                            <tr>
                                <th>Distance</th>
                                <th>Ways</th>
                                <th>Probability</th>
                                <th>Odds Against</th>
                            </tr>
                        </thead>
                        <tbody id="hitTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Bear-off Tab -->
            <div class="tab-content" id="bearoff-tab">
                <div class="calculator-section">
                    <h2>Probability of Bearing Off</h2>
                    <p class="section-description">Select positions for your last one or two men</p>
                    <div class="bearoff-controls">
                        <div class="bearoff-input-group">
                            <label>First man's point:</label>
                            <div class="button-group">
                                <button class="option-button" data-value="1">1</button>
                                <button class="option-button" data-value="2">2</button>
                                <button class="option-button" data-value="3">3</button>
                                <button class="option-button" data-value="4">4</button>
                                <button class="option-button" data-value="5">5</button>
                                <button class="option-button" data-value="6">6</button>
                            </div>
                        </div>
                        <div class="bearoff-input-group">
                            <label>Second man's point:</label>
                            <div class="button-group">
                                <button class="option-button" data-value="0">None</button>
                                <button class="option-button" data-value="1">1</button>
                                <button class="option-button" data-value="2">2</button>
                                <button class="option-button" data-value="3">3</button>
                                <button class="option-button" data-value="4">4</button>
                                <button class="option-button" data-value="5">5</button>
                                <button class="option-button" data-value="6">6</button>
                            </div>
                        </div>
                    </div>
                    <div class="bearoff-result" id="bearoffResult"></div>
                </div>
                <div class="grid-section">
                    <h2>The 36 Combinations</h2>
                    <div class="dice-grid" id="bearoffGrid"></div>
                </div>
                <div class="combinations-table-section">
                    <h2>All Combinations</h2>
                    <table class="combinations-table" id="bearoffTable">
                        <thead>
                            <tr>
                                <th>Position</th>
                                <th>Ways (1 roll)</th>
                                <th>Probability (1 roll)</th>
                                <th>Probability (2 rolls)</th>
                            </tr>
                        </thead>
                        <tbody id="bearoffTableBody"></tbody>
                    </table>
                </div>
            </div>
        </main>
        
        <footer>
            <p>Based on <a href="https://bkgm.com/books/JacobyCrawford/BasicProbability/" target="_blank" rel="noopener noreferrer">Basic Probability</a> by Oswald Jacoby and John R. Crawford from <em>The Backgammon Book</em> (1970)</p>
        </footer>
    </div>

    <script src="script.js?v=2"></script>
</body>
</html>
